from scipy.stats.kde import gaussian_kde
from scipy.stats import norm
from numpy import linspace,hstack
import matplotlib.pyplot as mp
import sys
import ast

def main():
	if len(sys.argv) != 2:
		print("Usage: python3 parsejson.py [file.hist]")
		return

	try:
		f = open(sys.argv[1])
	except FileNotFound:
		print('Error: File no found.')
		return

	val = ast.literal_eval(f.read())

	raw = []
	for v in val:
		for x in range(0,v[1]):
			raw.append(v[0])

	kde_plot(raw)
	return

def kde_plot(val):
	gkde = gaussian_kde(val)
	size = val[len(val) - 1]
	x = linspace(0,size,size*2)

	mp.plot(x,gkde(x),'r') # distribution function
	gkde.set_bandwidth(bw_method='silverman')
	
	mp.plot(x,gkde(x),'g') # distribution function
	gkde.set_bandwidth(bw_method=gkde.factor / 3.)
	
	mp.plot(x,gkde(x),'b') # distribution function
	
	mp.hist(val,normed=1,alpha=.15, ) # histogram
	
	mp.show()
	return

if __name__ == '__main__':
	main()
